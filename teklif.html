<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-LINE TASK 4.1: Teklif Hesaplama</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <div class="logo">Q-LINE</div>
        <div style="display: flex; gap: 12px; align-items: center;">
            <a href="index.html">Ana Sayfa</a>
            <a href="task2.html">Koleksiyon</a>
            <a href="team.html">Ekibimiz</a>
            <button id="themeToggle" class="theme-toggle">ğŸŒ™</button>
        </div>
    </nav>

    <main class="main-container">
        <header class="page-header">
            <h1>HÄ±zlÄ± Maliyet Hesaplama</h1>
            <p>Kendi ihtiyaÃ§larÄ±nÄ±za gÃ¶re tahmini fiyat alÄ±n â€” sayfa yenilenmeden.</p>
        </header>

        <section class="quote-section">
            <div class="quote-container">
                <div class="quote-body">
                    <div class="quote-inputs">
                        <label for="count">Adet (TakÄ±m SayÄ±sÄ±)</label>
                        <input id="count" type="number" min="1" value="1">

                        <label for="quality">KumaÅŸ Kalitesi</label>
                        <select id="quality">
                            <option value="standard">Standard - â‚º12.000</option>
                            <option value="premium">Premium - â‚º17.900</option>
                            <option value="lux">LÃ¼ks - â‚º65.000</option>
                        </select>

                        <div class="quote-checkbox">
                            <input id="alteration" type="checkbox">
                            <label for="alteration" style="margin: 0;">Ãœcretsiz Tadilat (Ä°lk yÄ±l)</label>
                        </div>

                        <div class="quote-checkbox">
                            <input id="express" type="checkbox">
                            <label for="express" style="margin: 0;">Express Teslimat (+%10)</label>
                        </div>

                        <button id="resetBtn" class="btn" style="margin-top: 20px;">SÄ±fÄ±rla</button>
                    </div>

                    <div class="quote-result">
                        <div class="result-card">
                            <h3>Tahmini Tutar</h3>
                            <div id="result">â‚º0</div>
                            <div id="breakdown"></div>
                        </div>
                        <p class="quote-note">Hesaplama Ã¶n bilgilendirmedir. Nihai fiyat gÃ¶rÃ¼ÅŸme ve Ã¶lÃ§Ã¼ sonrasÄ± kesinleÅŸir.</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="back-link">
            <a href="index.html">â† Ana Sayfaya DÃ¶n</a>
        </div>
    </main>

    <footer class="site-footer">
        <p>Â© 2026 Q-Line | Maliyet Hesaplama AracÄ±</p>
    </footer>

    <script>
        // FiyatlarÄ±n merkezi haritasÄ± (camelCase)
        const priceMap = {
            standard: 12000,
            premium: 17900,
            lux: 65000
        };

        // DOM referanslarÄ±nÄ± anlamlÄ± camelCase deÄŸiÅŸkenlerde topla
        const elements = {
            quantityInput: document.getElementById('count'),
            qualitySelect: document.getElementById('quality'),
            alterationCheckbox: document.getElementById('alteration'),
            expressCheckbox: document.getElementById('express'),
            resetButton: document.getElementById('resetBtn'),
            resultEl: document.getElementById('result'),
            breakdownEl: document.getElementById('breakdown')
        };

        // formatTRY: SayÄ±ya TÃ¼rk LirasÄ± biÃ§imlendirmesi uygular
        function formatTRY(value) {
            return new Intl.NumberFormat('tr-TR', { style: 'currency', currency: 'TRY' }).format(value);
        }

        // calculateEstimate: KullanÄ±cÄ± seÃ§imlerine gÃ¶re tahmini toplamÄ± hesaplar ve DOM'u gÃ¼nceller
        function calculateEstimate() {
            const quantity = Math.max(1, parseInt(elements.quantityInput.value, 10) || 1);
            const qualityKey = elements.qualitySelect.value;
            const basePrice = priceMap[qualityKey] || 0;

            const subTotal = basePrice * quantity;

            // alterationFee: Ãœcretsiz tadilat seÃ§ili deÄŸilse takÄ±m baÅŸÄ±na Ã¼cret uygula
            const alterationFee = elements.alterationCheckbox.checked ? 0 : 500 * quantity;

            let total = subTotal + alterationFee;

            // Express teslimat +%10
            if (elements.expressCheckbox.checked) {
                total = Math.round(total * 1.10);
            }

            // DOM gÃ¼ncellemeleri
            elements.resultEl.textContent = formatTRY(Math.round(total));

            // AÃ§Ä±klayÄ±cÄ± madde dÃ¶kÃ¼mÃ¼
            const qualityLabel = qualityKey === 'standard' ? 'Standard' : qualityKey === 'premium' ? 'Premium' : 'LÃ¼ks';
            const parts = [];
            parts.push(`${quantity} x ${qualityLabel}: ${formatTRY(subTotal)}`);
            parts.push(`Tadilat Ã¼creti: ${formatTRY(alterationFee)}`);
            if (elements.expressCheckbox.checked) parts.push('Express teslimat: +%10');

            elements.breakdownEl.innerHTML = parts.map(p => `<div>${p}</div>`).join('');
        }

        // AnlÄ±k hesaplama: input ve select deÄŸiÅŸikliklerinde calculateEstimate tetiklenir
        ['input', 'change'].forEach(ev => {
            elements.quantityInput.addEventListener(ev, calculateEstimate);
            elements.qualitySelect.addEventListener(ev, calculateEstimate);
            elements.alterationCheckbox.addEventListener(ev, calculateEstimate);
            elements.expressCheckbox.addEventListener(ev, calculateEstimate);
        });

        // resetButton: formu varsayÄ±lana dÃ¶ndÃ¼rÃ¼r ve anÄ±nda yeniden hesaplar
        elements.resetButton.addEventListener('click', (e) => {
            e.preventDefault();
            elements.quantityInput.value = 1;
            elements.qualitySelect.value = 'standard';
            elements.alterationCheckbox.checked = false;
            elements.expressCheckbox.checked = false;
            calculateEstimate();
        });

        // Sayfa yÃ¼klemesinde bir kez hesapla
        calculateEstimate();

        // Theme toggle: localStorage ile kullanÄ±cÄ± seÃ§imini sakla
        const themeToggleBtn = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            htmlElement.classList.add('dark-mode');
            themeToggleBtn.textContent = 'â˜€ï¸';
        }
        themeToggleBtn.addEventListener('click', () => {
            htmlElement.classList.toggle('dark-mode');
            const isDark = htmlElement.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeToggleBtn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
        });
    </script>
